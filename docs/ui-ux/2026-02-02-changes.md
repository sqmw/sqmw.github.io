# 2026-02-02 UI/UX 改进记录

## 总结
本次改动将页面拆分为清晰模块（配置/数据/状态/控制/渲染），并引入“筛选 + 排序 + 视图切换 + 结果摘要”工具栏，使浏览路径更短、更直观；同时强化视觉层级、可读性与交互反馈。

## 重点变更

### 1) 结构与职责拆分（单一职责 + 可复用）
- 拆分脚本为 `config.js`、`utils.js`、`state.js`、`data.js`、`ui.js`、`controls.js`、`main.js`。
- 统一入口由 `main.js` 负责初始化，避免一个文件承担过多责任。
- 移除旧的 `script.js`，避免重复逻辑与维护负担。

### 2) 新增浏览与筛选能力（提高可查看性）
- 搜索 + 清空按钮。
- 排序（按星标 / 更新 / 创建 / 名称）。
- 语言筛选（Top N 语言 + “全部语言”）。
- 网格/列表视图切换。
- 结果数量与筛选状态摘要。

### 3) 人机交互与可达性优化
- 添加“跳到主要内容”链接。
- 添加统一的 `:focus-visible` 反馈。
- 增加“返回顶部”按钮。
- 关键按钮加入 ARIA 语义与状态。

### 4) 视觉层级与一致性
- 引入“标题 / 正文”字体组合，强化层级。
- 增加渐变背景与柔和纹理，避免“白底普通感”。
- 统一卡片圆角、阴影、边框与工具栏样式。
- 弹窗样式与页面系统化对齐。

### 5) 性能与稳定性
- 增加本地缓存（带 TTL），降低频繁请求 GitHub API 的失败风险；失败时回退缓存，正常时始终用实时数据刷新缓存。
- 工具栏加入“刷新数据”按钮，用户可手动触发最新数据。

## 设计模式与原则落地（关键点）
- 单一职责原则：UI 渲染、数据获取、状态管理、控制器分离。
- 开闭原则：排序策略映射表可扩展。
- 策略模式：排序策略按 key 切换。
- 观察者模式：状态变更触发 UI 刷新。
- 门面模式：`App.*` 统一对外接口。

## 复杂点详解

### 语言筛选 + 排序 + 查询组合
- 先过滤（关键词 + 语言），再排序。
- 结果摘要同步更新，避免用户迷失在“筛选状态”中。

### Trending 计算与快照
- 使用本地快照保存上一轮 star 数据。
- 以增量优先排序，增量相同再用更新时间排序。

## 文件清单
- `index.html`：工具栏、筛选、视图切换、返回顶部。
- `style.css`：整体视觉升级、可达性、弹窗体系化。
- `config.js`：配置与 i18n。
- `utils.js`：通用工具（转义、文案、格式化、节流）。
- `state.js`：集中式状态。
- `data.js`：GitHub 数据加载与缓存。
- `ui.js`：渲染与 DOM 管理。
- `controls.js`：交互控制与策略。
- `main.js`：初始化与启动。
